<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Crawler Controller</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <script src="paper-full-0.9.25.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/dygraph/1.1.1/dygraph-combined.js"></script>
    <script src="socket.io-1.2.0.min.js"></script>
</head>

<body>

<div>
    <div style="float: left; width: 440px; height: 600px;">
        <h1>Camera</h1>
        <video id="camera" style="width: 440px;height: 400px;" autoplay></video>
        <div id="btnGroup" style="position: relative; left: 250px;">
            <div class="row">
                <button id="btnUp" class="btn btn-default" style="position: relative; left: 50px" onclick="onControl(this.id)"><span class="glyphicon glyphicon-arrow-up"></span> </button>
            </div>
            <br>
            <div class="row">
                <button id="btnLeft" class="btn btn-default" onclick="onControl(this.id)"><span class="glyphicon glyphicon-arrow-left"></span> </button>
                <button id="btnToggle" class="btn btn-default" onclick="onControl(this.id)">
                    <span class="glyphicon glyphicon-play"></span>
                    <span class="glyphicon glyphicon-pause"></span>
                </button>
                <button id="btnRight" class="btn btn-default" onclick="onControl(this.id)" ><span class="glyphicon glyphicon-arrow-right"></span> </button>
            </div>
            <br>
            <div class="row">
                <button id="btnDown" class="btn btn-default" style="position: relative; left: 50px" onclick="onControl(this.id)"><span class="glyphicon glyphicon-arrow-down"></span> </button>
            </div>
        </div>
        

    </div>
    <div style="float: right; width: 600px;height: 600px">
        <h1>Map</h1>
        <canvas id="myCanvas" style="width: 600px; height: 800px;"></canvas>
    </div>
</div>



<script>


    var socket = io();
//    var data = [];
//    var graph = new Dygraph(document.getElementById('graph'), [], {
//        labels: ['time', '1', '2', '3', '4']
//    });
//    var count = 0;
    // socket.on('raw_data', function(data){
    //     console.log(data);
    // });
//    socket.on('raw_data', function(rssiValues) {
//        rssiValues.unshift(count);
//        count++;
//        data.push(rssiValues);
//        if (data.length > 40) data = data.slice(1);
//        graph.updateOptions({
//            'file': data
//        });
//    });

    function onControl(id) {
        socket.emit('control', function (data) {
            console.log(data);
        })
    }

    window.onload = function() {
        paper.install(window);
        paper.setup('myCanvas');
        var wallPath = new Path({
            segments: [
                [440,640],
                [440, 40],
                [40, 40],
                [40,640]
            ],
            strokeColor: 'black',
            strokeWidth: 3,
            closed: true
        });
        var wallPath1 = new Path({
            segments: [
                [380,640],
                [380,580],
                [100,580],
                [100,640]
            ],
            strokeColor: 'black',
            strokeWidth: 3,
            closed: false
        });
        var wallPath2 = new Path({
            segments: [
                [100,100],
                [100,520],
                [140,520],
                [140,440],
                [340,440],
                [340,520],
                [380,520],
                [380,100]
            ],
            strokeColor: 'black',
            strokeWidth: 3,
            closed: true
        });
        var beaconLocations = [
            [62, 62],
            [62, 558],
            [418, 558],
            [418, 62]
        ]
        var beaconPaths = beaconLocations.map(function(location) {
            var path = new Path.Star({
                center: location,
                points: 5,
                radius1: 8,
                radius2: 22,
                rotation: 35,
                fillColor: 'red'
            });
        });
    }
</script>
</body>

</html>